(this["webpackJsonpit-kamasutra-js"]=this["webpackJsonpit-kamasutra-js"]||[]).push([[5],{209:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=a(15),o=a(23),i=a(216),c=a.n(i);const s=e=>({globalError:Object(o.c)(e).globalError});t.a=e=>Object(l.b)(s,{setGlobalError:o.d})(t=>{let{globalError:a,setGlobalError:n,...l}=t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{isOpen:!!a,onRequestClose:()=>n(null)},r.a.createElement("h1",{style:{color:"red"}},a)),r.a.createElement(e,l))})},210:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o}));const n=e=>(null===e||void 0===e?void 0:e.length)?null:"Field is required",r=e=>e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Email Field is invalid":null,l=e=>t=>t.length<=e?null:"Field has exceeded ".concat(e," characters"),o=e=>t=>t.length>=e?null:"Field should have at least ".concat(e," characters")},212:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u}));var n=a(1),r=a.n(n),l=a(213),o=a.n(l),i=a(8);var c=e=>{const t=t=>{let{input:a,meta:{touched:n,error:l},...i}=t,c=o.a.field;return n&&l&&(c+=" ".concat(o.a.error)),r.a.createElement("div",null,r.a.createElement(e,Object.assign({className:c},a,i)),n&&l&&r.a.createElement("div",{className:o.a.errorMsg},l))};return t.displayName="WithFormFieldWrapper(".concat(Object(i.c)(e),")"),t};const s=c(e=>r.a.createElement("input",e)),u=c(e=>r.a.createElement("textarea",e))},213:function(e,t,a){e.exports={field:"withFormField_field__s2rEd",error:"withFormField_error__1k8i1",errorMsg:"withFormField_errorMsg__3Jv8t"}},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(1),r=a.n(n),l=a(15),o=a(204),i=a(8),c=a(24),s=a(11);const u=e=>({authorizedUserId:Object(s.f)(e),isFetchingLogout:Object(s.e)(e).isFetchingLogout}),m=e=>{const t=t=>t.authorizedUserId?t.isFetchingLogout?r.a.createElement(c.a,null):r.a.createElement(e,t):r.a.createElement(o.a,{to:"/login"});return t.displayName="WithAuthWrapper(".concat(Object(i.c)(e),")"),Object(l.b)(u)(t)}},217:function(e,t,a){e.exports={profileInfo:"ProfileInfo_profileInfo__3SvGs",avatar:"ProfileInfo_avatar__ZRn66",banner:"ProfileInfo_banner__2E1Kn",contactItem:"ProfileInfo_contactItem__RWJ0B",profileDescription:"ProfileInfo_profileDescription__b5rGp"}},298:function(e,t,a){e.exports={banner:"Profile_banner__27JBv",avatar:"Profile_avatar__1x6mk",item:"Profile_item__3B9Do"}},299:function(e,t,a){e.exports={actionButtons:"ProfileStatus_actionButtons__2iiLW"}},300:function(e,t,a){e.exports={postList:"PostList_postList__17ZLL",item:"PostList_item__22S9e",likes:"PostList_likes__22mtp"}},309:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=(a(298),a(217)),o=a.n(l),i=a(299),c=a.n(i),s=a(10),u=a(15),m=a(26),d=a(24);const p={updateProfileStatus:m.h};var E=Object(s.d)(Object(u.b)(e=>({isFetchingStatus:Object(m.e)(e).isFetchingStatus}),p))(e=>{let{status:t,isFetchingStatus:a,isMyOwnProfile:l,updatingStatusError:o,updateProfileStatus:i}=e;const[s,u]=Object(n.useState)(!1),[m,p]=Object(n.useState)(t);return a?r.a.createElement(d.a,null):r.a.createElement("div",{onDoubleClick:()=>{l&&u(!0)}},r.a.createElement("b",null,"Profile Status:")," ",s?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{autoFocus:!0,onChange:e=>{p(e.target.value)},value:m}),r.a.createElement("div",{className:c.a.actionButtons},r.a.createElement("button",{onClick:e=>{e.stopPropagation(),m!==t&&i(m),u(!1)}},"Save"),r.a.createElement("button",{onClick:e=>{e.stopPropagation(),u(!1),p(t)}},"Cancel"))):r.a.createElement("span",null,t||"---"),!!o&&r.a.createElement("div",null,r.a.createElement("span",{style:{color:"red"}},o)))}),f=a(11),b=a(100),v=a(98),h=a(99),g=a(212),_=a(210),P=a(8),O=a(28);const j=e=>{let{contacts:t}=e;return Object.keys(t).map(e=>r.a.createElement("div",{key:e,className:o.a.contactItem},r.a.createElement("b",null,Object(P.a)(e)),r.a.createElement(b.a,{name:e,type:"text",component:g.a})))};var F=Object(h.a)({form:O.d})(e=>{let{handleSubmit:t,error:a,contacts:n,isUpdatingProfile:l,onDisableEdittingMode:o,...i}=e;return l?r.a.createElement(d.a,null):r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("b",null,"Full name:"),r.a.createElement(b.a,{name:"fullName",validate:[_.d],type:"text",component:g.a})),r.a.createElement("div",null,r.a.createElement("b",null,"About me:"),r.a.createElement(b.a,{name:"aboutMe",validate:[_.d],type:"text",component:g.a})),r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job:"),r.a.createElement(b.a,{name:"lookingForAJob",type:"checkbox",component:g.a})),r.a.createElement("div",null,r.a.createElement("b",null,"Professional skills:"),r.a.createElement(b.a,{name:"lookingForAJobDescription",validate:[_.d],type:"text",component:g.b})),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts:"),r.a.createElement(v.a,{name:"contacts"},r.a.createElement(j,{contacts:n}))),r.a.createElement("div",null,r.a.createElement("button",null,"Save Profile"),r.a.createElement("button",{onClick:e=>{e.stopPropagation(),o()}},"Cancel")),a&&r.a.createElement("div",{className:"form-error"},a))});const k=function(){let{contactField:e,contactValue:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&r.a.createElement("div",{className:o.a.contactItem},r.a.createElement("b",null,Object(P.a)(e),": "),t)};var S=e=>{let{profileInfo:t,isMyOwnProfile:a,onEnableEdittingMode:n}=e;const{fullName:l,lookingForAJob:o,lookingForAJobDescription:i,contacts:c,aboutMe:s}=t;return r.a.createElement("div",null,l&&r.a.createElement("div",null,r.a.createElement("b",null,"Full name: "),l),s&&r.a.createElement("div",null,r.a.createElement("b",null,"About me: "),s),r.a.createElement("div",null,r.a.createElement("b",null,"Looking for a job: "),o?"yes":"no"),i&&r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills: "),i),Object.keys(c).some(e=>c[e])&&r.a.createElement("div",null,r.a.createElement("b",null,"Contacts: "),Object.keys(c).map(e=>r.a.createElement(k,{key:e,contactField:e,contactValue:c[e]}))),a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Edit Profile")))},I=a(54),M=a.n(I);var x=Object(u.b)(e=>({profileAvatar:Object(m.e)(e).profileAvatar,isUpdatingAvatar:Object(m.e)(e).isUpdatingAvatar}),{updateProfileAvatar:m.g})(e=>{let{profileAvatar:t,isUpdatingAvatar:a,updateProfileAvatar:n,isMyOwnProfile:l}=e;return a?r.a.createElement(d.a,null):r.a.createElement("div",{className:o.a.avatar},r.a.createElement("img",{src:t||M.a}),l&&r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:e=>{e.target.files[0]&&n(e.target.files[0])}})))});class y extends n.PureComponent{constructor(){super(...arguments),this.state={isEdittingMode:!1},this.onEnableEdittingMode=()=>{this.setState({isEdittingMode:!0})},this.onDisableEdittingMode=()=>{this.setState({isEdittingMode:!1})},this.onSubmit=e=>{this.props.updateProfile(e).then(()=>{this.setState({isEdittingMode:!1})})}}render(){const{profileInfo:{photos:e,...t},status:a,authorizedUserId:n,isUpdatingProfile:l,updatingStatusError:i}=this.props,c=n===t.userId,{isEdittingMode:s}=this.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.a.profileInfo},r.a.createElement(x,{isMyOwnProfile:c}),r.a.createElement("div",null,r.a.createElement(E,{key:"".concat(a).concat(i||""),updatingStatusError:i,status:a,isMyOwnProfile:c}),r.a.createElement("div",{className:o.a.profileDescription},s?r.a.createElement(F,{contacts:t.contacts,onDisableEdittingMode:this.onDisableEdittingMode,isUpdatingProfile:l,onSubmit:this.onSubmit,initialValues:t}):r.a.createElement(S,{isMyOwnProfile:c,onEnableEdittingMode:this.onEnableEdittingMode,profileInfo:t})))))}}var U=Object(s.d)(Object(u.b)(e=>({profileInfo:Object(m.e)(e).profileInfo,isUpdatingProfile:Object(m.e)(e).isUpdatingProfile,authorizedUserId:Object(f.f)(e),status:Object(m.e)(e).status,updatingStatusError:Object(m.e)(e).updatingStatusError}),{updateProfile:m.f}))(y),A=a(300),w=a.n(A);const C=Object(_.b)(20);let D=Object(n.memo)(e=>{let{handleSubmit:t,pristine:a,invalid:n}=e;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(b.a,{validate:[_.d,C],type:"text",name:"post",component:g.a})),r.a.createElement("div",null,r.a.createElement("button",{disabled:a||n},"Add Post")))});D=Object(h.a)({form:O.c})(D);var N=D;const L=e=>{let{content:t,likesCount:a}=e;return r.a.createElement("div",{className:w.a.item},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1615751072497-5f5169febe17?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y3V0ZSUyMGRvZ3xlbnwwfHwwfHx8MA%3D%3D"}),t,r.a.createElement("div",{className:w.a.likes},"Likes ",a))},J=Object(n.memo)(e=>{let{posts:t,addPost:a}=e;return r.a.createElement("div",{className:w.a.postList},r.a.createElement("h3",null,"My Posts"),r.a.createElement(N,{onSubmit:e=>{a(e.post)}}),t.map(e=>{let{content:t,likesCount:a,id:n}=e;return r.a.createElement(L,{content:t,likesCount:a,key:n})}))}),z={addPost:m.a};var Z=Object(u.b)(e=>({posts:Object(m.e)(e).posts}),z)(J);var B=e=>{let{isFetchingProfile:t,profileInfo:a}=e;return t||!a?r.a.createElement(d.a,null):r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(Z,null))},W=a(207),G=a(215);var R=Object(G.a)(B),V=a(209);class q extends r.a.Component{componentDidMount(){this._initProfile()}componentDidUpdate(e){var t,a;(null===(t=e.match.params)||void 0===t?void 0:t.id)!==(null===(a=this.props.match.params)||void 0===a?void 0:a.id)&&this._initProfile()}_initProfile(){const e=this._getUserId();e&&(this.props.getProfile(e),this.props.getProfileStatus(e))}_getUrlId(){var e;return null===(e=this.props.match.params)||void 0===e?void 0:e.id}_getUserId(){let e=this._getUrlId();return e||(e=this.props.authorizedUserId),e}render(){const{authorizedUserId:e,getProfile:t,getProfileStatus:a,...n}=this.props;return this._getUrlId()?r.a.createElement(B,n):r.a.createElement(R,n)}}const H={getProfile:m.b,getProfileStatus:m.c};t.default=Object(s.d)(V.a,W.a,Object(u.b)(e=>({isFetchingProfile:Object(m.e)(e).isFetchingProfile,profileInfo:Object(m.e)(e).profileInfo,authorizedUserId:Object(f.f)(e)}),H))(q)},98:function(e,t,a){"use strict";var n=a(21),r=a.n(n),l=a(44),o=a.n(l),i=a(211),c=a.n(i),s=a(1),u=a.n(s),m=a(2),d=a.n(m),p=a(229),E=a(221),f=a(220),b=function(e){function t(t){var a;if(a=e.call(this,t)||this,!t._reduxForm)throw new Error("FormSection must be inside a component decorated with reduxForm()");return a}return c()(t,e),t.prototype.render=function(){var e=this.props,t=(e._reduxForm,e.children),a=e.name,n=e.component,l=o()(e,["_reduxForm","children","name","component"]);return u.a.isValidElement(t)?Object(s.createElement)(E.a.Provider,{value:r()({},this.props._reduxForm,{sectionPrefix:Object(p.a)(this.props,a)}),children:t}):Object(s.createElement)(E.a.Provider,{value:r()({},this.props._reduxForm,{sectionPrefix:Object(p.a)(this.props,a)}),children:Object(s.createElement)(n,r()({},l,{children:t}))})},t}(s.Component);b.propTypes={name:d.a.string.isRequired,component:f.a},b.defaultProps={component:"div"},t.a=Object(E.b)(b)}}]);
//# sourceMappingURL=5.f5fce67c.chunk.js.map